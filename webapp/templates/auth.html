{% extends "base.html" %} {% block title %}Authentication{% endblock %} {% block
content %}
<style>
  body {
    font-family: "Inter", sans-serif;
    background: #f9fafb;
    margin: 0;
    padding: 0;
  }

  .auth-container {
    max-width: 420px;
    margin: 4rem auto;
    background: white;
    border-radius: 10px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    padding: 2rem;
  }

  .auth-tabs {
    display: flex;
    justify-content: space-around;
    margin-bottom: 1.5rem;
    border-bottom: 2px solid #e5e7eb;
  }

  .auth-tab {
    padding: 0.75rem 1rem;
    cursor: pointer;
    font-weight: 500;
    color: #6b7280;
    transition: color 0.2s, border-color 0.2s;
    border-bottom: 2px solid transparent;
  }

  .auth-tab.active {
    color: #111827;
    border-bottom: 2px solid #2563eb;
  }

  form {
    display: none;
    flex-direction: column;
  }

  form.active {
    display: flex;
  }

  input {
    margin-bottom: 1rem;
    padding: 0.75rem;
    border: 1px solid #d1d5db;
    border-radius: 6px;
    font-size: 1rem;
    width: 100%;
  }

  button {
    background: #2563eb;
    color: white;
    border: none;
    border-radius: 6px;
    padding: 0.75rem;
    font-size: 1rem;
    cursor: pointer;
    transition: background 0.3s;
  }

  button:hover {
    background: #1e40af;
  }

  .flash-messages {
    margin-bottom: 1rem;
  }

  .flash {
    padding: 0.75rem 1rem;
    border-radius: 6px;
    margin-bottom: 0.5rem;
    font-size: 0.9rem;
  }

  .flash.error {
    background-color: #fee2e2;
    color: #b91c1c;
  }

  .flash.success {
    background-color: #dcfce7;
    color: #166534;
  }

  .switch-info {
    text-align: center;
    margin-top: 1rem;
    color: #6b7280;
    font-size: 0.9rem;
  }

  .switch-info a {
    color: #2563eb;
    text-decoration: none;
    font-weight: 500;
  }

  .switch-info a:hover {
    text-decoration: underline;
  }
</style>

<div class="auth-container">
  <div class="auth-tabs">
    <div
      class="auth-tab {% if action == 'login' %}active{% endif %}"
      id="login-tab"
    >
      Login
    </div>
    <div
      class="auth-tab {% if action == 'register' %}active{% endif %}"
      id="register-tab"
    >
      Register
    </div>
  </div>

  <div class="flash-messages">
    {% with messages = get_flashed_messages(with_categories=true) %} {% if
    messages %} {% for category, message in messages %}
    <div class="flash {{ category }}">{{ message }}</div>
    {% endfor %} {% endif %} {% endwith %}
  </div>

  <form
    id="login-form"
    method="POST"
    action="{{ url_for('auth.login') }}"
    class="{% if action == 'login' %}active{% endif %}"
  >
    <input
      type="email"
      name="email"
      placeholder="Email"
      required
      value="{{ email or '' }}"
    />
    <input type="password" name="password" placeholder="Password" required />
    <button type="submit">Login</button>
    <div class="switch-info">
      Donâ€™t have an account?
      <a href="#" id="switch-to-register">Register here</a>.
    </div>
  </form>

  <form
    id="register-form"
    method="POST"
    action="{{ url_for('auth.register') }}"
    class="{% if action == 'register' %}active{% endif %}"
  >
    <input
      type="text"
      name="name"
      placeholder="Username"
      required
      value="{{ name or '' }}"
    />
    <input
      type="email"
      name="email"
      placeholder="Email"
      required
      value="{{ email or '' }}"
    />
    <input type="password" name="password" placeholder="Password" required />
    <button type="submit">Register</button>
    <div class="switch-info">
      Already have an account? <a href="#" id="switch-to-login">Login here</a>.
    </div>
  </form>
</div>

<script>
  const loginTab = document.getElementById("login-tab");
  const registerTab = document.getElementById("register-tab");
  const loginForm = document.getElementById("login-form");
  const registerForm = document.getElementById("register-form");
  const switchToRegister = document.getElementById("switch-to-register");
  const switchToLogin = document.getElementById("switch-to-login");

  function showLogin() {
    loginTab.classList.add("active");
    registerTab.classList.remove("active");
    loginForm.classList.add("active");
    registerForm.classList.remove("active");
  }

  function showRegister() {
    registerTab.classList.add("active");
    loginTab.classList.remove("active");
    registerForm.classList.add("active");
    loginForm.classList.remove("active");
  }

  loginTab.addEventListener("click", showLogin);
  registerTab.addEventListener("click", showRegister);
  if (switchToRegister)
    switchToRegister.addEventListener("click", (e) => {
      e.preventDefault();
      showRegister();
    });
  if (switchToLogin)
    switchToLogin.addEventListener("click", (e) => {
      e.preventDefault();
      showLogin();
    });
</script>
{% endblock %}
